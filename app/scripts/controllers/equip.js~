'use strict';

/**
 * @ngdoc function
 * @name dndApp.controller:EquipCtrl
 * @description
 * # EquipCtrl
 * Controller of the dndApp
 */
angular.module('dndApp')
  .controller('EquipCtrl', function ($scope, $location, Settings) {
   $scope.links = [
      {'view':'Fight', 'link':'/'},
      {'view':'Generate', 'link':'/generate'},
      {'view':'Equip', 'link':'/equip'},
      {'view':'About', 'link':'/about'} ];

    $scope.selectlink = $scope.links[2];
    $scope.go = function(lnk) {
      if (lnk.view !== 'Equip') {
        $location.path( lnk.link );
      }
    };

    $scope.equipment = [
      {'type':'Balanced',
        'weapontypeodds': [1, 2, 2, 2, 1],
        'armortypeodds': [1, 2, 2, 4, 4, 4, 2, 1]
      }, {'type':'Cheap Weapon',
        'weapontypeodds': [7, 2, 1, 0, 0],
        'armortypeodds': [0, 0, 1, 2, 4, 4, 4, 4]
      }, {'type':'Good Weapon',
        'weapontypeodds': [0, 0, 0, 2, 8],
        'armortypeodds': [4, 4, 4, 4, 2, 1, 0, 0]
      }, {'type':'Cheap Armor',
        'weapontypeodds': [0, 1, 2, 4, 4],
        'armortypeodds': [7, 2, 1, 0, 0, 0, 0, 0]
      }, {'type':'Good Armor',
        'weapontypeodds': [4, 4, 2, 1, 0],
        'armortypeodds': [0, 0, 0, 0, 0, 1, 3, 6]
      } 
    ];

    $scope.selectequip = Settings.getEquipment();

    $scope.selection = function(equ) {
      Settings.setEquipment(equ);
      $scope.selectequip = equ;
    }; 
    $scope.weapons = [
      {'type': 'knife',
          'thac0': [20, 20, 20, 19, 17, 16, 14, 12, 10, 9], 
          'damage':{'dice': 1, 'type': 3, 'plus': 0}},
      {'type': 'short sword', 
          'thac0': [20, 20, 19, 18, 16, 15, 13, 12, 11, 10], 
          'damage':{'dice': 1, 'type': 4, 'plus': 0}},
      {'type': 'broad sword',
          'thac0': [20, 19, 18, 18, 16, 15, 13, 12, 11, 10], 
          'damage':{'dice': 1, 'type': 6, 'plus': 0}},
      {'type': 'long sword', 
          'thac0': [20, 19, 18, 17, 15, 14, 12, 11, 10, 9], 
          'damage':{'dice': 1, 'type': 8, 'plus': 0}},
      {'type': 'great sword', 
          'thac0': [18, 17, 17, 16, 15, 14, 12, 10, 9, 8], 
          'damage':{'dice': 1, 'type': 10, 'plus': 2}} ];

    $scope.armor = [
      {'type':'Leather armor', 'ac':8},
      {'type':'Ring mail', 'ac':7},
      {'type':'Scale mail', 'ac':6},
      {'type':'Chain mail', 'ac':5},
      {'type':'Splint mail', 'ac':4},
      {'type':'Plate mail', 'ac':3},
      {'type':'Field plate mail', 'ac':2},
      {'type':'Full plate', 'ac':1} ];

    $scope.selectpriority = Settings.getGenerator();

  });
